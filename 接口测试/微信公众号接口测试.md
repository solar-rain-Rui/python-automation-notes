
接口：
API接口属于一种系统或程序的调用接口
GUI接口属于一种图形界面的操作软件的系统

接口测试： 测试系统各个组件接口
- 测试被测系统和外部系统之间的接口（只需要测试正例即可）
- 测试内部接口：
1. 内部接口只提供给内部系统使用（只需要测试正例即可）内部使用，不对外公开
2. 内部接口提供给外部系统使用（测试必须非常全面，正例，各种异常场景，权限控制）

### 接口测试流程

1. 拿到接口api文档（通过抓包工具获取），熟悉接口的业务，接口地址，鉴权方式，入参，出参，错误码
2. 编写接口用例以及评审
	思路：
		正例：输入正常入参，接口能够成功返回数据
		反例：
			鉴权反例：鉴权码为空，鉴权码错误，鉴权码过期...
			参数反例：参数为空，参数类型异常，参数长度异常
			错误码覆盖：根据业务而定
			其他错误场景：接口黑名单，接口调用次数，分页场景
3. 使用接口测试工具Postman执行接口测试
4. Postman+Newman+Jenkins实现持续集成，并且输出测试报告且发送邮件

微信公众平台接口
	获取权限：
	appid(ID):
	secret(秘钥)



#### Postman

界面介绍：
	Home主页
	workspaces 工作空间
		Collections 集合，项目集合
		APiS api文档
		Environments 环境变量，全局变量
		Mock Server 虚拟服务器
		Monitors 监听器
		History 历史记录

#### Postman接口测试

##### 微信公众平台测试
1. Get 获取接口统一鉴权码token接口
2. Post 创建标签接口
3. Get 获取公众号已创建的标签接口 
4. Post 编辑标签接口

##### 请求页签
- Params：get请求传参
- authorization：鉴权
- headers：请求头
- Body：post请求传参
			none 没有参数
			form-data 既可以传键值对参数也可以传文件
			x-www-from-urlenconded  只能够传键值对参数
			raw：json,text,xml,html,javascript
			binary: 把文件以二进制的方式传参
- pre-request-script：请求之前的脚本
- tests：请求之后的断言
- cookies：用于管理cookie信息

##### 响应页签
- Body:接口返回的数据
	- Pretty:以json,html,xml......不同的格式查看返回的数据
	- Raw:以文本的方式查看返回的数据
	- PreView:以网页的方式查看返回的数据
- Cookies:响应的Cookie信息
- Headers:响应头
- Teset Results:断言的结果
- 状态码
- 状态信息
- 响应的时间
- 响应的字节数

get请求和post请求本质区别是传参方式不一样：
get请求在地址栏后面以?的方式传参，多个参数之间用&分隔
post请求是在body以表单的方式传参

##### Postman的环境变量和全局变量

问题：
多种环境：开发环境，测试环境，生产环境
接口在不同环境下运行，都要修改域名、端口号

解决：通过环境变量管理
1. 定义环境变量 `New Environment`  开发环境(ip1)、测试环境(ip2)、生产环境 (ip：域名)
2. 接口用{{变量名}}引用变量
3. 切换环境后直接运行，变量会自动适配当前环境


**环境变量**：环境变量就是全局变量
**全局变量**：全局变量是能够在任何接口里面访问的变量

获取环境变量和全局变量的值通过：**{{变量名}}**


##### 接口关联

问题：第二个接口与第一个接口有关联，要从第一个接口把asscess_token的值复制过来执行；需要手动关联

解决：
1. json提取器实现接口关联
```javascript
//第一个接口
//使用json提取器提取access_token值
//把返回的字符串格式的数据转换成对象的形式
var result=JSON.parse(responseBody);
//把access_token设置为全局变量
pm.globals.set("acess_token",result.access_token);
//第二个接口
{{acess_token}}
```

2. 使用正则表达式提取器实现接口关联
 ```javascript
 //第一个接口
 //使用正则表达式提取器实现接口关联，match匹配
 //"access_token":"是匹配前缀，json中的键值
 /*(.*?)：这是一个捕获组，用于提取目标内容
     . 表示匹配任意字符（除换行符外）
     *? 表示非贪婪匹配，即尽可能少地匹配字符，直到遇到下一个限定条件
"是匹配的后缀，精确匹配双引号（这通常是 JSON 中字符串值的结束标记）*/
//提取出access_token的值
 var result=responseBody.match(new RegExp('"access_token":"(.*?)"'));
 //设置为全局变量
 pm.globals.set("access_token",result[1]);
 //第二个接口
{{acess_token}}
 
```

##### Postman内置动态参数以及自定义的动态参数

问题：需要手动修改参数

**postman内置动态参数：**
- {{$timestamp}} 生成当前时间的时间戳
- {{$randomint}} 生成0-1000之间的随机数
- {{$guid}} 生成速记GUID字符串

**自定义动态参数**

```javascript
//手动的获得时间戳
var times=Date.now();
//设置为全局变量
pm.globals.set("times",times);
//使用时使用：{{times}}
```

